WARNING:tensorflow:From /home/hp200266/u01036/gzq/fj_software/tensorflow/TensorFlow-2.2.0/lib/python3.8/site-packages/tensorflow/python/compat/v2_compat.py:96: disable_resource_variables (from tensorflow.python.ops.variable_scope) is deprecated and will be removed in a future version.
Instructions for updating:
non-resource variables are not supported in the long term
OMP: Warning #181: OMP_PROC_BIND: ignored because KMP_AFFINITY has been defined
WARNING:tensorflow:From /home/hp200266/u01036/gzq/fj_software/tensorflow/TensorFlow-2.2.0/lib/python3.8/site-packages/tensorflow/python/profiler/internal/flops_registry.py:142: tensor_shape_from_node_def_name (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.compat.v1.graph_util.tensor_shape_from_node_def_name`
DEEPMD WARNING From /home/hp200266/u01036/gzq/fj_software/tensorflow/TensorFlow-2.2.0/lib/python3.8/site-packages/tensorflow/python/profiler/internal/flops_registry.py:142: tensor_shape_from_node_def_name (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.compat.v1.graph_util.tensor_shape_from_node_def_name`
73 ops no flops stats due to incomplete shapes.
DEEPMD INFO    # ---------------output of dp test--------------- 
DEEPMD INFO    # testing system : ../data/data_3
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Parsing Inputs...
generating trace file.

******************************************************
Timeline file is written to ./profiler.json_0.
Open a Chrome browser, enter URL chrome://tracing and load the timeline file.
******************************************************
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.
Incomplete shape.

=========================Options=============================
-max_depth                  10
-min_bytes                  0
-min_peak_bytes             0
-min_residual_bytes         0
-min_output_bytes           0
-min_micros                 0
-min_accelerator_micros     0
-min_cpu_micros             0
-min_params                 0
-min_float_ops              0
-min_occurrence             0
-step                       -1
-order_by                   micros
-account_type_regexes       .*
-start_name_regexes         .*
-trim_name_regexes          
-show_name_regexes          .*
-hide_name_regexes          
-account_displayed_op_only  false
-select                     bytes,float_ops,micros,occurrence
-output                     stdout:

==================Model Analysis Report======================

Doc:
op: The nodes are operation kernel type, such as MatMul, Conv2D. Graph nodes belonging to the same type are aggregated together.
requested bytes: The memory requested by the operation, accumulatively.
flops: Number of float operations. Note: Please read the implementation for the math behind it.
total execution time: Sum of accelerator execution time and cpu execution time.
cpu execution time: The time from the start to the end of the operation. It's the sum of actual cpu run time plus the time that it spends waiting if part of computation is launched asynchronously.
accelerator execution time: Time spent executing on the accelerator. This is normally measured by the actual hardware library.
occurrence: The number of times it occurs

Profile:
node name | requested bytes | total execution time | accelerator execution time | cpu execution time | # float_ops | op occurrence (run|defined)
TabulateFusionGrad              1.06MB (100.00%, 1.24%),      18.87ms (100.00%, 32.19%),             0us (0.00%, 0.00%),      18.87ms (100.00%, 32.19%),   0 float_ops (100.00%, 0.00%),        4|4
ProdEnvMatA                      4.13MB (98.76%, 4.84%),       10.39ms (67.81%, 17.72%),             0us (0.00%, 0.00%),       10.39ms (67.81%, 17.72%),   0 float_ops (100.00%, 0.00%),        1|1
MatmulNt                         4.25MB (93.92%, 4.97%),        7.16ms (50.10%, 12.22%),             0us (0.00%, 0.00%),        7.16ms (50.10%, 12.22%),   0 float_ops (100.00%, 0.00%),        8|8
GemmLayer                        1.11MB (88.95%, 1.30%),         5.74ms (37.87%, 9.79%),             0us (0.00%, 0.00%),         5.74ms (37.87%, 9.79%),   0 float_ops (100.00%, 0.00%),        8|8
TabulateFusion                   1.57MB (87.66%, 1.84%),         4.53ms (28.08%, 7.73%),             0us (0.00%, 0.00%),         4.53ms (28.08%, 7.73%),   0 float_ops (100.00%, 0.00%),        4|4
BatchMatMulV2                    4.03MB (85.82%, 4.72%),         2.55ms (20.35%, 4.35%),             0us (0.00%, 0.00%),         2.55ms (20.35%, 4.35%), 106.95m float_ops (100.00%, 98.52%),        6|6
ProdVirialSeA                   13.90KB (81.10%, 0.02%),         2.02ms (16.00%, 3.44%),             0us (0.00%, 0.00%),         2.02ms (16.00%, 3.44%),     0 float_ops (1.48%, 0.00%),        1|1
Pad                            11.32MB (81.08%, 13.24%),         1.50ms (12.56%, 2.55%),             0us (0.00%, 0.00%),         1.50ms (12.56%, 2.55%),     0 float_ops (1.48%, 0.00%),      14|14
Slice                            8.30MB (67.84%, 9.71%),         1.44ms (10.01%, 2.45%),             0us (0.00%, 0.00%),         1.44ms (10.01%, 2.45%),     0 float_ops (1.48%, 0.00%),      18|18
ProdForceSeA                     4.61KB (58.13%, 0.01%),           823us (7.56%, 1.40%),             0us (0.00%, 0.00%),           823us (7.56%, 1.40%),     0 float_ops (1.48%, 0.00%),        1|1
AddN                                  0B (0.00%, 0.00%),           756us (6.16%, 1.29%),             0us (0.00%, 0.00%),           756us (6.16%, 1.29%), 809.47k float_ops (1.48%, 0.75%),      14|14

======================End of Report==========================
DEEPMD INFO    # number of test data : 1 
DEEPMD INFO    Energy RMSE        : 1.704136e-01 eV
DEEPMD INFO    Energy RMSE/Natoms : 8.875711e-04 eV
DEEPMD INFO    Force  RMSE        : 3.364325e-01 eV/A
DEEPMD INFO    Virial RMSE        : 1.419113e+02 eV
DEEPMD INFO    Virial RMSE/Natoms : 7.391212e-01 eV
DEEPMD INFO    # ----------------------------------------------- 
profile : ture
dp model type : ener
OMP: Warning #181: OMP_PROC_BIND: ignored because KMP_AFFINITY has been defined
INFO: You are running LIKWID in a cpuset with 50 CPUs. Taking given IDs as logical ID in cpuset
[1;34m[likwid-pin] Main PID -> hwthread 12 - OK[0m

Top k op
average time	min time	max time	percentage	op name
10387.00	   10387	   10387	    0.18	load/ProdEnvMatA
 8279.00	    8279	    8279	    0.14	load/gradients/filter_type_1/TabulateFusion_1_grad/TabulateFusionGrad
 4358.00	    4358	    4358	    0.07	load/gradients/filter_type_1/TabulateFusion_grad/TabulateFusionGrad
 4184.00	    4184	    4184	    0.07	load/gradients/filter_type_0/TabulateFusion_1_grad/TabulateFusionGrad
 3590.00	    3590	    3590	    0.06	load/gradients/layer_0_type_1/GemmLayer_grad/MatmulNt
 2936.00	    2936	    2936	    0.05	load/layer_0_type_1/GemmLayer
 2193.00	    2193	    2193	    0.04	load/gradients/layer_0_type_0/GemmLayer_grad/MatmulNt
 2046.00	    2046	    2046	    0.04	load/gradients/filter_type_0/TabulateFusion_grad/TabulateFusionGrad
 2015.00	    2015	    2015	    0.03	load/ProdVirialSeA
 1901.00	    1901	    1901	    0.03	load/filter_type_1/TabulateFusion_1
 1627.00	    1627	    1627	    0.03	load/layer_0_type_0/GemmLayer
 1088.00	    1088	    1088	    0.02	load/filter_type_1/TabulateFusion
 1020.00	    1020	    1020	    0.02	load/filter_type_0/TabulateFusion_1
  835.00	     835	     835	    0.01	load/filter_type_1/MatMul
  823.00	     823	     823	    0.01	load/ProdForceSeA
  627.00	     627	     627	    0.01	load/gradients/filter_type_1/MatMul_grad/MatMul
  522.00	     522	     522	    0.01	load/filter_type_0/TabulateFusion
  441.00	     441	     441	    0.01	load/filter_type_0/MatMul
  396.00	     396	     396	    0.01	load/gradients/layer_2_type_1/GemmLayer_grad/MatmulNt
  393.00	     393	     393	    0.01	load/gradients/layer_1_type_1/GemmLayer_grad/MatmulNt
  350.00	     350	     350	    0.01	load/layer_1_type_1/GemmLayer
  349.00	     349	     349	    0.01	load/layer_2_type_1/GemmLayer
  341.00	     341	     341	    0.01	load/concat
  318.00	     318	     318	    0.01	load/gradients/AddN_4
  313.00	     313	     313	    0.01	load/gradients/filter_type_0/MatMul_grad/MatMul
  277.00	     277	     277	    0.00	load/gradients/layer_2_type_0/GemmLayer_grad/MatmulNt
  262.00	     262	     262	    0.00	load/gradients/Slice_3_grad/Pad
  256.00	     256	     256	    0.00	load/gradients/filter_type_1/Slice_3_grad/Pad
  254.00	     254	     254	    0.00	load/gradients/layer_1_type_0/GemmLayer_grad/MatmulNt
  229.00	     229	     229	    0.00	load/gradients/Slice_2_grad/Pad
  226.00	     226	     226	    0.00	load/gradients/concat_grad/Slice_1
  223.00	     223	     223	    0.00	load/Slice_3
  218.00	     218	     218	    0.00	load/gradients/filter_type_1/MatMul_grad/MatMul_1
  204.00	     204	     204	    0.00	load/layer_2_type_0/GemmLayer
  202.00	     202	     202	    0.00	load/layer_1_type_0/GemmLayer
  184.00	     184	     184	    0.00	load/filter_type_1/Slice_3
  137.00	     137	     137	    0.00	load/gradients/filter_type_1/Slice_1_grad/Pad
  136.00	     136	     136	    0.00	load/gradients/filter_type_0/Slice_3_grad/Pad
  119.00	     119	     119	    0.00	load/gradients/concat_grad/Slice
  118.00	     118	     118	    0.00	load/Slice_2
  118.00	     118	     118	    0.00	load/gradients/filter_type_0/MatMul_grad/MatMul_1
   90.00	      90	      90	    0.00	load/filter_type_0/Slice_3
   85.00	      85	      85	    0.00	load/filter_type_1/Slice_1
   82.00	      82	      82	    0.00	load/gradients/AddN_13
   76.00	      76	      76	    0.00	load/layer_0_type_1/FastTanh
   74.00	      74	      74	    0.00	load/gradients/Slice_1_grad/Pad
   73.00	      73	      73	    0.00	load/gradients/filter_type_0/Slice_1_grad/Pad
   70.00	      70	      70	    0.00	load/gradients/Slice_grad/Pad
   68.00	      68	      68	    0.00	load/layer_2_type_1/FastTanh
   67.00	      67	      67	    0.00	load/Slice_1
   67.00	      67	      67	    0.00	load/layer_1_type_1/FastTanh
   65.00	      65	      65	    0.00	load/filter_type_1/add
   63.00	      63	      63	    0.00	load/layer_1_type_1/mul
   61.00	      61	      61	    0.00	load/gradients/AddN_12
   58.00	      58	      58	    0.00	load/gradients/layer_2_type_1/mul_grad/Mul
   57.00	      57	      57	    0.00	load/gradients/filter_type_1/Slice_4_grad/Pad
   55.00	      55	      55	    0.00	load/gradients/layer_1_type_1/mul_grad/Mul
   54.00	      54	      54	    0.00	load/layer_2_type_1/mul
   54.00	      54	      54	    0.00	load/gradients/AddN_6
   54.00	      54	      54	    0.00	load/gradients/filter_type_1/Slice_2_grad/Pad
   53.00	      53	      53	    0.00	load/filter_type_1/Slice_4
   53.00	      53	      53	    0.00	load/gradients/filter_type_1/Slice_grad/Pad
   50.00	      50	      50	    0.00	load/filter_type_1/Slice_2
   47.00	      47	      47	    0.00	load/filter_type_0/Slice_1
   45.00	      45	      45	    0.00	load/final_layer_type_1/GemmLayer
   44.00	      44	      44	    0.00	load/gradients/layer_2_type_0/mul_grad/Mul
   41.00	      41	      41	    0.00	load/filter_type_1/mul
   41.00	      41	      41	    0.00	load/layer_1_type_0/mul
   41.00	      41	      41	    0.00	load/gradients/filter_type_1/mul_grad/Mul
   40.00	      40	      40	    0.00	load/Slice
   40.00	      40	      40	    0.00	load/layer_0_type_0/FastTanh
   39.00	      39	      39	    0.00	load/layer_2_type_0/FastTanh
   39.00	      39	      39	    0.00	load/gradients/AddN_10
   37.00	      37	      37	    0.00	load/layer_1_type_0/FastTanh
   35.00	      35	      35	    0.00	load/filter_type_0/add
   35.00	      35	      35	    0.00	load/filter_type_1/Slice
   35.00	      35	      35	    0.00	load/gradients/layer_1_type_0/mul_grad/Mul
   34.00	      34	      34	    0.00	load/filter_type_0/Slice_4
   33.00	      33	      33	    0.00	load/layer_2_type_0/mul
   32.00	      32	      32	    0.00	load/gradients/final_layer_type_0/GemmLayer_grad/MatmulNt
   32.00	      32	      32	    0.00	load/gradients/filter_type_0/Slice_4_grad/Pad
   31.00	      31	      31	    0.00	load/gradients/filter_type_0/Slice_2_grad/Pad
   31.00	      31	      31	    0.00	load/gradients/filter_type_0/Slice_grad/Pad
   30.00	      30	      30	    0.00	load/filter_type_0/Slice_2
   30.00	      30	      30	    0.00	load/gradients/AddN_11
   29.00	      29	      29	    0.00	load/gradients/final_layer_type_1/GemmLayer_grad/MatmulNt
   29.00	      29	      29	    0.00	load/gradients/layer_2_type_1/FastTanh_grad/mul
   29.00	      29	      29	    0.00	load/gradients/layer_1_type_1/FastTanh_grad/mul
   28.00	      28	      28	    0.00	load/gradients/AddN_1
   28.00	      28	      28	    0.00	load/gradients/layer_0_type_1/FastTanh_grad/mul
   28.00	      28	      28	    0.00	load/gradients/AddN_5
   27.00	      27	      27	    0.00	load/add_5
   27.00	      27	      27	    0.00	load/final_layer_type_0/GemmLayer
   27.00	      27	      27	    0.00	load/gradients/AddN_3
   26.00	      26	      26	    0.00	load/add_6
   23.00	      23	      23	    0.00	load/filter_type_0/mul
   22.00	      22	      22	    0.00	load/gradients/AddN_9
   22.00	      22	      22	    0.00	load/gradients/filter_type_0/mul_grad/Mul
   21.00	      21	      21	    0.00	load/gradients/AddN_8
   20.00	      20	      20	    0.00	load/filter_type_0/Slice

Top k op type
average time	percentage	op type
18867.00	    0.32	TabulateFusionGrad
10387.00	    0.18	ProdEnvMatA
 7164.00	    0.12	MatmulNt
 5740.00	    0.10	GemmLayer
 4531.00	    0.08	TabulateFusion
 2552.00	    0.04	MatMul
 2015.00	    0.03	ProdVirialSeA
 1495.00	    0.03	Pad
 1437.00	    0.02	Slice
  823.00	    0.01	ProdForceSeA
  756.00	    0.01	AddN
  456.00	    0.01	concat
  433.00	    0.01	mul
  327.00	    0.01	FastTanh
  255.00	    0.00	Mul
  214.00	    0.00	Shape
  192.00	    0.00	Reshape
  191.00	    0.00	add
   99.00	    0.00	strided
   76.00	    0.00	sub
